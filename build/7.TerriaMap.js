((self||window).webpackJsonp=(self||window).webpackJsonp||[]).push([[7],{2725:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r(183),r(170),r(177),r(178),r(171),r(172),r(176),r(181),r(180),r(186),r(179),r(173),r(208),r(200),r(202),r(216),r(212),r(213),r(214),r(201),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(198),r(182),r(184),r(53),r(185),r(211),r(188),r(95),r(191),r(55),r(425),r(189),r(242),r(195),r(205),r(337),r(54),r(92),r(91),r(192),r(256),r(199),r(310),r(96),r(193);var n,o,a,l,u=r(194),s=r(332),c=Z(r(2726)),f=Z(r(223)),d=Z(r(232)),p=Z(r(187)),v=Z(r(231)),h=Z(r(473)),y=Z(r(203)),g=Z(r(239)),m=Z(r(1009)),b=Z(r(526)),_=Z(r(1373)),w=Z(r(327)),S=Z(r(2727)),O=Z(r(247)),P=Z(r(207)),L=Z(r(343)),k=H(r(2757)),C=Z(r(2758)),j=Z(r(2759)),I=Z(r(2760)),x=Z(r(2761)),E=Z(r(2762)),T=Z(r(2764)),D=Z(r(637)),A=Z(r(2765)),z=Z(r(748)),F=H(r(251)),R=Z(r(991)),M=Z(r(393)),N=Z(r(477)),G=Z(r(583)),U=Z(r(356)),B=Z(r(445)),W=Z(r(735)),V=r(2766);function q(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(q=function(e){return e?r:t})(e)}function H(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=q(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(n,a,l):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function Z(e){return e&&e.__esModule?e:{default:e}}function X(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=$(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}function Y(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Y=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),l=new k(i||[]);return n(a,"_invoke",{value:S(e,r,l)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function p(){}function v(){}function h(){}var y={};s(y,a,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(C([])));m&&m!==t&&r.call(m,a)&&(y=m);var b=h.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var o;n(this,"_invoke",{value:function(n,a){function l(){return new t((function(o,l){!function n(o,a,l,u){var s=f(e[o],e,a);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==i(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,u)}),(function(e){n("throw",e,l,u)})):t.resolve(d).then((function(e){c.value=e,l(c)}),(function(e){return n("throw",e,l,u)}))}u(s.arg)}(n,a,o,l)}))}return o=o?o.then(l,l):l()}})}function S(e,t,r){var i="suspendedStart";return function(n,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===n)throw o;return{value:void 0,done:!0}}for(r.method=n,r.arg=o;;){var a=r.delegate;if(a){var l=O(a,r);if(l){if(l===d)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var u=f(e,t,r);if("normal"===u.type){if(i=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i="completed",r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,i=e.iterator[r];if(void 0===i)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var n=f(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,d;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(e){if(e||""===e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}throw new TypeError(i(e)+" is not iterable")}return v.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:v,configurable:!0}),v.displayName=s(h,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},_(w.prototype),s(w.prototype,l,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var a=new w(c(t,r,i,n),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(b),s(b,u,"Generator"),s(b,a,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=C,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(r,i){return a.type="throw",a.arg=e,t.next=r,i&&(t.method="next",t.arg=void 0),!!i}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;L(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function J(e,t,r,i,n,o,a){try{var l=e[o](a),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(i,n)}function K(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function a(e){J(o,i,n,a,l,"next",e)}function l(e){J(o,i,n,a,l,"throw",e)}a(void 0)}))}}function Q(e){return function(e){if(Array.isArray(e))return ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){if(e){if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(e,t):void 0}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function te(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function re(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,se(i.key),i)}}function ie(e,t){return(ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=le(e);if(t){var n=le(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return oe(this,r)}}function oe(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ae(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t,r){return(t=se(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}function ce(e,t,r,i,n){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}r(307).default;var fe=(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(H,e);var t,r,i,n,q=ne(H);function H(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,H),ue(ae(r=q.call(this)),"type","Leaflet"),ue(ae(r),"terria",void 0),ue(ae(r),"terriaViewer",void 0),ue(ae(r),"map",void 0),ue(ae(r),"scene",void 0),ue(ae(r),"dataSources",new _.default),ue(ae(r),"dataSourceDisplay",void 0),ue(ae(r),"canShowSplitter",!0),ue(ae(r),"_attributionControl",void 0),ue(ae(r),"_leafletVisualizer",void 0),ue(ae(r),"_eventHelper",void 0),ue(ae(r),"_selectionIndicator",void 0),ue(ae(r),"_stopRequestAnimationFrame",!1),ue(ae(r),"_cesiumReqAnimFrameId",void 0),ue(ae(r),"_pickedFeatures",void 0),ue(ae(r),"_pauseMapInteractionCount",0),ue(ae(r),"_disposeWorkbenchMapItemsSubscription",void 0),ue(ae(r),"_disposeDisableInteractionSubscription",void 0),ue(ae(r),"_disposeSelectedFeatureSubscription",void 0),ue(ae(r),"_disposeSplitterReaction",void 0),te(ae(r),"size",o,ae(r)),te(ae(r),"nw",a,ae(r)),te(ae(r),"se",l,ae(r)),ue(ae(r),"_createImageryLayer",(0,s.computedFn)((function(e,t){var i={bounds:t&&(0,A.default)(t)};return(0,k.isImageryProviderGridLayer)(e)?new k.default(ae(r),e,i):new C.default(ae(r),e,i)}))),(0,u.makeObservable)(ae(r)),r.terria=e.terria,r.terriaViewer=e,r.map=T.default.map(t,{zoomControl:!1,attributionControl:!1,zoomSnap:1,preferCanvas:!0,worldCopyJump:!1}).setView([-28.5,135],5),r.map.on("move",(function(){return r.updateMapObservables()})),r.map.on("zoom",(function(){return r.updateMapObservables()})),r.scene=new I.default(r.map),r._attributionControl=new V.LeafletAttribution(r.terria),r.map.addControl(r._attributionControl),r._leafletVisualizer=new E.default,r._selectionIndicator=new x.default(ae(r)),r.dataSourceDisplay=new j.default({scene:r.scene,dataSourceCollection:r.dataSources,visualizersCallback:r._leafletVisualizer.visualizersCallback}),r._eventHelper=new h.default,r._eventHelper.add(r.terria.timelineClock.onTick,(function(e){r.dataSourceDisplay.update(e.currentTime)}));return(0,L.default)((function e(){r._stopRequestAnimationFrame||(r.terria.timelineClock.tick(),r._cesiumReqAnimFrameId=(0,m.default)(e))})),r._disposeWorkbenchMapItemsSubscription=r.observeModelLayer(),r._disposeSplitterReaction=r._reactToSplitterChanges(),r._disposeDisableInteractionSubscription=(0,u.autorun)((function(){var e=r.map,t=(0,O.default)([e.touchZoom,e.doubleClickZoom,e.scrollWheelZoom,e.boxZoom,e.keyboard,e.dragging,e.tap]),i=r.pickLocation.bind(ae(r)),n=function(e,t){r._featurePicked(e,t)};r.map.on("mousemove",(function(e){var t=e;r.mouseCoords.updateCoordinatesFromLeaflet(r.terria,t.originalEvent)})),r.terriaViewer.disableInteraction?(t.forEach((function(e){return e.disable()})),r.map.off("click",i),r.scene.featureClicked.removeEventListener(n),r._disposeSelectedFeatureSubscription&&r._disposeSelectedFeatureSubscription()):(t.forEach((function(e){return e.enable()})),r.map.on("click",i),r.scene.featureClicked.addEventListener(n),r._disposeSelectedFeatureSubscription=(0,u.autorun)((function(){var e=r.terria.selectedFeature;r._selectFeature(e)})))})),r._initProgressEvent(),r}return t=H,(r=[{key:"updateMapObservables",value:function(){this.size=this.map.getSize(),this.nw=this.map.containerPointToLayerPoint([0,0]),this.se=this.map.containerPointToLayerPoint(this.size)}},{key:"_makeImageryLayerFromParts",value:function(e,t){return R.default.isMixedInto(t)&&(e.imageryProvider.errorEvent.removeEventListener(t.onTileLoadError,t),e.imageryProvider.errorEvent.addEventListener(t.onTileLoadError,t)),this._createImageryLayer(e.imageryProvider,e.clippingRectangle)}},{key:"attributionPrefix",get:function(){return this._attributionControl.prefix}},{key:"attributions",get:function(){return this._attributionControl.dataAttributions}},{key:"_initProgressEvent",value:function(){var e=this,t=function(){var t=0;e.map.eachLayer((function(e){var r=e;null!=r&&r._tiles&&(t+=Object.keys(r._tiles).filter((function(e){return!r._tiles[e].loaded})).length)})),e._updateTilesLoadingCount(t)};this.map.on("layeradd",function(e){void 0!==e.layer._tiles&&e.layer.on("tileloadstart tileload load",t)}.bind(this)),this.map.on("layerremove",function(e){e.layer.off("tileloadstart tileload load",t)}.bind(this))}},{key:"pickLocation",value:function(e){var t=e;(t.latlng.lng>180||t.latlng.lng<-180)&&(t.latlng=t.latlng.wrap()),this._pickFeatures(t.latlng)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"pauseMapInteraction",value:function(){++this._pauseMapInteractionCount,1===this._pauseMapInteractionCount&&this.map.dragging.disable()}},{key:"resumeMapInteraction",value:function(){var e=this;--this._pauseMapInteractionCount,0===this._pauseMapInteractionCount&&setTimeout((function(){0===e._pauseMapInteractionCount&&e.map.dragging.enable()}),0)}},{key:"destroy",value:function(){this._disposeSelectedFeatureSubscription&&this._disposeSelectedFeatureSubscription(),this._disposeSplitterReaction(),this._disposeWorkbenchMapItemsSubscription(),this._eventHelper.removeAll(),this._disposeDisableInteractionSubscription(),this._stopRequestAnimationFrame=!0,(0,P.default)(this._cesiumReqAnimFrameId)&&(0,c.default)(this._cesiumReqAnimFrameId),this.dataSourceDisplay.destroy(),this.map.off("move"),this.map.off("zoom"),this.map.remove()}},{key:"availableCatalogItems",get:function(){return[].concat(Q(this.terriaViewer.items.get()),[this.terriaViewer.baseMap])}},{key:"availableDataSources",get:function(){var e,t=this.availableCatalogItems;return(e=[]).concat.apply(e,Q(t.filter(P.default).map((function(e){return e.mapItems})))).filter(pe)}},{key:"observeModelLayer",value:function(){var e=this,t=Promise.resolve(),r=(0,u.reaction)((function(){return e.availableDataSources}),(function(){t=t.then(K(Y().mark((function t(){return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.syncDataSourceCollection(e.availableDataSources,e.dataSources);case 2:e.notifyRepaintRequired();case 3:case"end":return t.stop()}}),t)})))).catch(console.error)}),{fireImmediately:!0}),i=(0,u.autorun)((function(){var t,r=e.availableCatalogItems,i=(t=[]).concat.apply(t,Q(r.filter(P.default).map((function(e){return e.mapItems.filter(F.ImageryParts.is).map((function(t){return{item:e,parts:t}}))})))).map((function(t){var r=t.item,i=t.parts;return(0,U.default)(r,M.default,"leafletUpdateInterval")&&(i.imageryProvider._leafletUpdateInterval=r.leafletUpdateInterval),{parts:i,layer:e._makeImageryLayerFromParts(i,r)}}));e.map.eachLayer((function(t){(de(t)||t instanceof k.default)&&-1===i.findIndex((function(e){return e.layer===t}))&&e.map.removeLayer(t)}));var n=100;i.reverse().forEach((function(t){var r=t.parts,i=t.layer;r.show?(i.setOpacity(r.alpha),i.setZIndex(n),n++,e.map.hasLayer(i)||e.map.addLayer(i)):e.map.removeLayer(i)}))}));return function(){r(),i()}}},{key:"syncDataSourceCollection",value:(n=K(Y().mark((function e(t,r){var i,n,o,a,l;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=r.length-1;i>=0;i--)n=r.get(i),-1!==t.indexOf(n)&&n.show||r.remove(n);o=X(t),e.prev=2,o.s();case 4:if((a=o.n()).done){e.next=11;break}if(l=a.value,r.contains(l)||!l.show){e.next=9;break}return e.next=9,r.add(l);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),o.e(e.t0);case 16:return e.prev=16,o.f(),e.finish(16);case 19:(0,u.runInAction)((function(){return t.forEach((function(e){r.contains(e)&&r.raiseToTop(e)}))}));case 20:case"end":return e.stop()}}),e,null,[[2,13,16,19]])}))),function(e,t){return n.apply(this,arguments)})},{key:"doZoomTo",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(!(0,P.default)(e))return Promise.resolve();if((0,P.default)(e.entities))(0,P.default)(this.dataSourceDisplay)&&(t=this.dataSourceDisplay.getLatLngBounds(e));else{var i;if(e instanceof g.default)i=e;else if(e instanceof G.default)i=e.rectangle;else if(F.default.isMixedInto(e)){if((0,P.default)(e.cesiumRectangle)&&(i=e.cesiumRectangle),!(0,P.default)(i))return this.doZoomTo(e.mapItems[0],r)}else i=e.rectangle;i.east<i.west&&((i=g.default.clone(i)).east+=y.default.TWO_PI),t=(0,A.default)(i)}return(0,P.default)(t)&&this.map.flyToBounds(t,{animate:r>0,duration:r}),Promise.resolve()}},{key:"getCurrentCameraView",value:function(){var e=this.map.getBounds();return new G.default(g.default.fromDegrees(e.getWest(),e.getSouth(),e.getEast(),e.getNorth()))}},{key:"notifyRepaintRequired",value:function(){}},{key:"pickFromLocation",value:function(e,t,r){this._pickFeatures(T.default.latLng({lat:e.latitude,lng:e.longitude,alt:e.height}),t,r)}},{key:"_featurePicked",value:function(e,t){if(this._pickFeatures(t.latlng),e.entityCollection&&e.entityCollection.owner){var r=e.entityCollection.owner;if(r instanceof b.default&&r.name==W.default._featureHighlightName)return}var i=B.default.fromEntityCollectionOrEntity(e),n=i._catalogItem;if(z.default.isMixedInto(n)&&"function"==typeof n.getFeaturesFromPickResult&&this.terria.allowFeatureInfoRequests){var o,a,l=n.getFeaturesFromPickResult.bind(n)(void 0,e,((null===(o=this._pickedFeatures)||void 0===o?void 0:o.features.length)||0)<n.maxRequests);l&&(0,P.default)(this._pickedFeatures)&&(Array.isArray(l)?(a=this._pickedFeatures.features).push.apply(a,Q(l)):this._pickedFeatures.features.push(l))}else(0,P.default)(this._pickedFeatures)&&this._pickedFeatures.features.push(i);(0,P.default)(this._pickedFeatures)&&(0,P.default)(i)&&i.position&&(this._pickedFeatures.pickPosition=i.position._value)}},{key:"_pickFeatures",value:function(e,t,r){var i=this,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!(0,P.default)(this._pickedFeatures)){this._pickedFeatures=new D.default,(0,P.default)(r)&&(this._pickedFeatures.features=r);var o=(0,L.default)((function(){var e=v.default.WGS84.cartographicToCartesian(l);(0,u.runInAction)((function(){var t=i.terria.mapInteractionModeStack;if((0,P.default)(t)&&t.length>0){var r=t[t.length-1].pickedFeatures;(0,P.default)(r)&&(r.pickPosition=e)}else(0,P.default)(i.terria.pickedFeatures)&&(i.terria.pickedFeatures.pickPosition=e)})),i._pickedFeatures=void 0})),a=[];this.terria.allowFeatureInfoRequests&&this.map.eachLayer((function(e){de(e)&&a.push(e)})),a.sort((function(e,t){return(0,P.default)(e.options.zIndex)&&(0,P.default)(t.options.zIndex)?e.options.zIndex<t.options.zIndex?1:e.options.zIndex>t.options.zIndex?-1:0:0})),t=(0,p.default)(t,{});var l=d.default.fromDegrees(e.lng,e.lat);this._pickedFeatures.pickPosition=v.default.WGS84.cartographicToCartesian(l);var s=a.map(function(){var r=K(Y().mark((function r(n){var o,a,l,u,s,c,f;return Y().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l=n.imageryProvider.url,u=y.default.toRadians(e.lng),s=y.default.toRadians(e.lat),null===(o=null===(a=t)||void 0===a?void 0:a[l])||void 0===o){r.next=7;break}r.t0=o,r.next=10;break;case 7:return r.next=9,n.getFeaturePickingCoords(i.map,u,s);case 9:r.t0=r.sent;case 10:return c=r.t0,r.next=13,n.pickFeatures(c.x,c.y,c.level,u,s);case 13:return null==(f=r.sent)||f.forEach((function(e){return e.imageryLayer=n})),r.abrupt("return",{features:f,imageryLayer:n,coords:c});case 16:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()),c=this._pickedFeatures;c.allFeaturesAvailablePromise=Promise.all([o,Promise.all(s).then((function(e){(0,u.runInAction)((function(){c.isLoading=!1})),c.providerCoords={};var t=e.filter((function(e){return(0,P.default)(e.features)&&e.features.length>0}));c.providerCoords=t.reduce((function(e,t){var r,i=null===(r=t.imageryLayer)||void 0===r?void 0:r.imageryProvider;return i&&(e[i.url]=t.coords),e}),{});var r=t.reduce((function(e,t){if(i.terria.showSplitter&&!1===n&&(0,P.default)(c.pickPosition)){var r=i._computePositionOnScreen(c.pickPosition),o=i._getSplitterSideForScreenPosition(r),a=t.imageryLayer.splitDirection;if(a!==o&&a!==w.default.NONE)return e}return e.concat(t.features.map((function(e){return(0,P.default)(e.position)||(e.position=l),i._createFeatureFromImageryLayerFeature(e)})))}),c.features);(0,u.runInAction)((function(){c.features=r}))})).catch((function(e){throw(0,u.runInAction)((function(){c.isLoading=!1,c.error="An unknown error occurred while picking features."})),e}))]).then((function(){})),(0,u.runInAction)((function(){var e=i.terria.mapInteractionModeStack;(0,P.default)(e)&&e.length>0?e[e.length-1].pickedFeatures=i._pickedFeatures:i.terria.pickedFeatures=i._pickedFeatures}))}}},{key:"_reactToSplitterChanges",value:function(){var e=this;return(0,u.autorun)((function(){var t=e.terria.mainViewer.items.get(),r=e.terria.showSplitter,i=e.terria.splitPosition;t.forEach((function(t){if(F.default.isMixedInto(t)&&(0,U.default)(t,N.default,"splitDirection")){var n=e.getImageryLayersForItem(t),o=t.splitDirection;n.forEach((0,u.action)((function(e){r?(e.splitDirection=o,e.splitPosition=i):(e.splitDirection=w.default.NONE,e.splitPosition=i)})))}})),e.notifyRepaintRequired()}))}},{key:"getImageryLayersForItem",value:function(e){var t=this;return(0,O.default)(e.mapItems.map((function(r){if(F.ImageryParts.is(r)){var i=t._makeImageryLayerFromParts(r,e);return i instanceof C.default||i instanceof k.default?i:void 0}})))}},{key:"_computePositionOnScreen",value:function(e,t){var r=new d.default,i=v.default.WGS84.cartesianToCartographic(e,r),n=this.map.latLngToContainerPoint(T.default.latLng(y.default.toDegrees(i.latitude),y.default.toDegrees(i.longitude)));return(0,P.default)(t)?(t.x=n.x,t.y=n.y):t=new f.default(n.x,n.y),t}},{key:"_selectFeature",value:function(e){if(this._highlightFeature(e),(0,P.default)(e)&&(0,P.default)(e.position)){var t=new d.default,r=v.default.WGS84.cartesianToCartographic(e.position.getValue(this.terria.timelineClock.currentTime),t);this._selectionIndicator.setLatLng(T.default.latLng([y.default.toDegrees(r.latitude),y.default.toDegrees(r.longitude)])),this._selectionIndicator.animateSelectionIndicatorAppear()}else this._selectionIndicator.animateSelectionIndicatorDepart()}},{key:"getClipsForSplitter",value:function(){var e="",t="",r=0,i=0;if(this.terria.showSplitter){var n=this.map,o=n.getSize(),a=n.containerPointToLayerPoint([0,0]),l=n.containerPointToLayerPoint(o);r=o.x*this.terria.splitPosition,i=Math.round(a.x+r),e="rect("+[a.y,i,l.y,a.x].join("px,")+"px)",t="rect("+[a.y,l.x,l.y,i].join("px,")+"px)"}return{left:e,right:t,clipPositionWithinMap:r,clipX:i}}},{key:"isSplitterDragThumb",value:function(e){return e.className&&e.className.indexOf&&e.className.indexOf("tjs-splitter__thumb")>=0}},{key:"captureScreenshot",value:function(){var e=this;this._attributionControl.remove();try{var t;if(this.terria.showSplitter){var r=this.getClipsForSplitter(),i=r.left.replace(/ /g,""),n=r.right.replace(/ /g,"");t=(0,S.default)(this.map.getContainer(),{useCORS:!0,ignoreElements:function(t){return void 0!==t.style.clip&&null!==t.style.clip&&t.style.clip.replace(/ /g,"")===n||e.isSplitterDragThumb(t)}}).then((function(t){return(0,S.default)(e.map.getContainer(),{useCORS:!0,ignoreElements:function(t){return void 0!==t.style.clip&&null!==t.style.clip&&t.style.clip.replace(/ /g,"")===i||e.isSplitterDragThumb(t)}}).then((function(e){var i=document.createElement("canvas");i.width=t.width,i.height=t.height;var n=i.getContext("2d");if(null==n)return null;var o=r.clipPositionWithinMap*window.devicePixelRatio;return n.drawImage(t,0,0,o,i.height,0,0,o,i.height),n.drawImage(e,o,0,i.width-o,i.height,o,0,i.width-o,i.height),i}))}))}else t=(0,S.default)(this.map.getContainer(),{useCORS:!0});return t.then((function(e){return e.toDataURL("image/png")})).finally((function(){e._attributionControl.addTo(e.map)}))}catch(e){return this._attributionControl.addTo(this.map),Promise.reject(e)}}},{key:"_addVectorTileHighlight",value:function(e,t){var r=this.map,i={opacity:1,bounds:(0,A.default)(t)};(0,P.default)(r.options.maxZoom)&&(i.maxZoom=r.options.maxZoom);var n=new k.default(this,e,i);return n.addTo(r),n.bringToFront(),function(){r.removeLayer(n)}}}])&&re(t.prototype,r),i&&re(t,i),Object.defineProperty(t,"prototype",{writable:!1}),H}(W.default),o=ce(n.prototype,"size",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=ce(n.prototype,"nw",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=ce(n.prototype,"se",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce(n.prototype,"updateMapObservables",[u.action],Object.getOwnPropertyDescriptor(n.prototype,"updateMapObservables"),n.prototype),ce(n.prototype,"attributions",[u.computed],Object.getOwnPropertyDescriptor(n.prototype,"attributions"),n.prototype),ce(n.prototype,"availableCatalogItems",[u.computed],Object.getOwnPropertyDescriptor(n.prototype,"availableCatalogItems"),n.prototype),ce(n.prototype,"availableDataSources",[u.computed],Object.getOwnPropertyDescriptor(n.prototype,"availableDataSources"),n.prototype),ce(n.prototype,"_featurePicked",[u.action],Object.getOwnPropertyDescriptor(n.prototype,"_featurePicked"),n.prototype),n);function de(e){return"imageryProvider"in e}function pe(e){return"entities"in e}t.default=fe},2757:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r(184),r(53),r(185),r(188),r(192),r(189),r(183),r(170),r(177),r(178),r(171),r(172),r(176),r(181),r(182),r(180),r(186),r(179),r(173),r(54),r(92),r(91),Object.defineProperty(t,"__esModule",{value:!0}),t.isImageryProviderGridLayer=t.default=void 0,r(266),r(256),r(193);var n,o,a,l=p(r(480)),u=r(194),s=p(r(232)),c=p(r(229)),f=p(r(203)),d=p(r(327));function p(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function h(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,S(i.key),i)}}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=_(e);if(t){var n=_(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}function O(e,t,r,i,n){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}t.isImageryProviderGridLayer=function(e){return"function"==typeof e.requestImageForCanvas};var P=(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(p,e);var t,r,i,n=g(p);function p(e,t,r){var i,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(i=n.call(this,Object.assign(r,{async:!0,tileSize:256}))).leaflet=e,i.imageryProvider=t,w(b(i),"errorEvent",new c.default),w(b(i),"initialized",!1),w(b(i),"_usable",!1),w(b(i),"_delayedUpdate",void 0),w(b(i),"_zSubtract",0),w(b(i),"_previousCredits",[]),v(b(i),"splitDirection",o,b(i)),v(b(i),"splitPosition",a,b(i)),(0,u.makeObservable)(b(i)),i.on("add",(function(){l||(l=i._reactToSplitterChange())})),i.on("remove",(function(){l&&(l(),l=void 0)})),i}return t=p,(r=[{key:"_reactToSplitterChange",value:function(){var e=this;return(0,u.autorun)((function(){var t=e.getContainer();if(null!==t)if(e.splitDirection===d.default.LEFT){var r=e._clipsForSplitter.left;t.style.clip=r}else if(e.splitDirection===d.default.RIGHT){var i=e._clipsForSplitter.right;t.style.clip=i}else t.style.clip="auto"}))}},{key:"_clipsForSplitter",get:function(){var e,t,r="",i="";return this.leaflet.size&&this.leaflet.nw&&this.leaflet.se&&(e=this.leaflet.size.x*this.splitPosition,t=Math.round(this.leaflet.nw.x+e),r="rect("+[this.leaflet.nw.y,t,this.leaflet.se.y,this.leaflet.nw.x].join("px,")+"px)",i="rect("+[this.leaflet.nw.y,this.leaflet.se.x,this.leaflet.se.y,t].join("px,")+"px)"),{left:r,right:i,clipPositionWithinMap:e,clipX:t}}},{key:"createTile",value:function(e,t){var r=this,i=l.default.DomUtil.create("canvas","leaflet-tile"),n=this.getTileSize();return i.width=n.x,i.height=n.y,this.imageryProvider.readyPromise.then((function(){var t=r.imageryProvider.tilingScheme.getNumberOfXTilesAtLevel(e.z);return r.imageryProvider.requestImageForCanvas(f.default.mod(e.x,t),e.y,e.z,i)})).then((function(e){t(void 0,e)})),i}},{key:"getFeaturePickingCoords",value:function(e,t,r){var i=this,n=new s.default(f.default.negativePiToPi(t),r,0),o=Math.round(e.getZoom());return this.imageryProvider.readyPromise.then((function(){var e=i.imageryProvider.tilingScheme.positionToTileXY(n,o);return{x:e.x,y:e.y,level:o}}))}},{key:"pickFeatures",value:function(e,t,r,i,n){var o=this;return this.imageryProvider.readyPromise.then((function(){return o.imageryProvider.pickFeatures(e,t,r,i,n)}))}}])&&h(t.prototype,r),i&&h(t,i),Object.defineProperty(t,"prototype",{writable:!1}),p}(l.default.GridLayer),o=O(n.prototype,"splitDirection",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.default.NONE}}),a=O(n.prototype,"splitPosition",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),O(n.prototype,"_clipsForSplitter",[u.computed],Object.getOwnPropertyDescriptor(n.prototype,"_clipsForSplitter"),n.prototype),n);t.default=P},2758:function(e,t,r){"use strict";r(170),r(181),r(182),r(180),r(186),r(179),r(173),r(54),r(92),r(91),r(184),r(185),r(188),r(192),r(189),r(183),r(250),r(211),r(245),r(243),r(55),r(216),r(212),r(213),r(214),r(195),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(191),r(177),r(178),r(171),r(172),r(53),r(176),r(256),r(95),r(193);var i,n,o,a=S(r(227)),l=S(r(480)),u=r(194),s=S(r(223)),c=S(r(232)),f=S(r(315)),d=S(r(174)),p=S(r(229)),v=S(r(203)),h=S(r(450)),y=S(r(381)),g=S(r(327)),m=S(r(207)),b=S(r(1381)),_=S(r(224)),w=S(r(1343));function S(e){return e&&e.__esModule?e:{default:e}}function O(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */O=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),l=new k(n||[]);return i(a,"_invoke",{value:w(e,r,l)}),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var f={};function d(){}function p(){}function v(){}var h={};u(h,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(C([])));g&&g!==t&&r.call(g,o)&&(h=g);var m=v.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){var n;i(this,"_invoke",{value:function(i,o){function a(){return new t((function(n,a){!function i(n,o,a,l){var u=c(e[n],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==E(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,a,l)}),(function(e){i("throw",e,a,l)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return i("throw",e,a,l)}))}l(u.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}})}function w(e,t,r){var i="suspendedStart";return function(n,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===n)throw o;return{value:void 0,done:!0}}for(r.method=n,r.arg=o;;){var a=r.delegate;if(a){var l=S(a,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var u=c(e,t,r);if("normal"===u.type){if(i=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i="completed",r.method="throw",r.arg=u.arg)}}}function S(e,t){var r=t.method,i=e.iterator[r];if(void 0===i)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var n=c(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(e){if(e||""===e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function t(){for(;++i<e.length;)if(r.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}throw new TypeError(E(e)+" is not iterable")}return p.prototype=v,i(m,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:p,configurable:!0}),p.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},b(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var a=new _(s(t,r,i,n),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(m),u(m,l,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=C,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(r,i){return a.type="throw",a.arg=e,t.next=r,i&&(t.method="next",t.arg=void 0),!!i}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;L(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function P(e,t,r,i,n,o,a){try{var l=e[o](a),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(i,n)}function L(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=I(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(this,arguments)}function I(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=G(e)););return e}function x(e,t,r,i,n){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,B(i.key),i)}}function D(e,t,r){return t&&T(e.prototype,t),r&&T(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=G(e);if(t){var n=G(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return M(this,r)}}function M(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return N(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,r){return(t=B(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==E(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}r(307).default;var W=new c.default,V=new c.default,q=new s.default,H=new s.default,Z=(f.default,i=function(e){z(s,e);var t,r,i=R(s);function s(e,t){var r,a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return A(this,s),(r=i.call(this,void 0,C(C({},l),{},{updateInterval:(0,d.default)(t._leafletUpdateInterval)?t._leafletUpdateInterval:100}))).leaflet=e,r.imageryProvider=t,U(N(r),"tileSize",256),U(N(r),"errorEvent",new p.default),U(N(r),"initialized",!1),U(N(r),"_usable",!1),U(N(r),"_delayedUpdate",void 0),U(N(r),"_zSubtract",0),U(N(r),"_requestImageError",void 0),U(N(r),"_previousCredits",[]),U(N(r),"_leafletUpdateInterval",void 0),L(N(r),"splitDirection",n,N(r)),L(N(r),"splitPosition",o,N(r)),(0,u.makeObservable)(N(r)),r.imageryProvider=t,r.on("add",(function(){a||(a=r._reactToSplitterChange())})),r.on("remove",(function(){a&&(a(),a=void 0)})),r._leafletUpdateInterval=(0,d.default)(t._leafletUpdateInterval)?t._leafletUpdateInterval:100,r.on("tileloadstart",(function(e){e.tile.style.width=r.getTileSize().x+.5+"px",e.tile.style.height=r.getTileSize().y+.5+"px"})),r}return D(s,[{key:"_reactToSplitterChange",value:function(){var e=this;return(0,u.autorun)((function(){var t=e.getContainer();if(null!==t)if(e.splitDirection===g.default.LEFT){var r=e._clipsForSplitter.left;t.style.clip=r}else if(e.splitDirection===g.default.RIGHT){var i=e._clipsForSplitter.right;t.style.clip=i}else t.style.clip="auto"}))}},{key:"_clipsForSplitter",get:function(){var e,t,r="",i="";return this.leaflet.size&&this.leaflet.nw&&this.leaflet.se&&(e=this.leaflet.size.x*this.splitPosition,t=Math.round(this.leaflet.nw.x+e),r="rect("+[this.leaflet.nw.y,t,this.leaflet.se.y,this.leaflet.nw.x].join("px,")+"px)",i="rect("+[this.leaflet.nw.y,this.leaflet.se.x,this.leaflet.se.y,t].join("px,")+"px)"),{left:r,right:i,clipPositionWithinMap:e,clipX:t}}},{key:"_tileOnError",value:function(e,t,r){}},{key:"createTile",value:function(e,t){var r=this,i=j(G(s.prototype),"createTile",this).call(this,e,t),n=function n(o){if(o)o.then((function(){n()})).catch((function(e){l.default.TileLayer.prototype._tileOnError.call(r,t,i,e)}));else{var a=r.getTileUrl(e);(0,m.default)(a)&&(i.src=a)}};return l.default.DomEvent.on(i,"error",(function(t){var i=r._getLevelFromZ(e),o=a.default.t("map.cesium.failedToObtain",{x:e.x,y:e.y,level:i});r._requestImageError=h.default.handleError(r._requestImageError,r.imageryProvider,r.imageryProvider.errorEvent,o,e.x,e.y,i,n,t)})),i}},{key:"getTileUrl",value:function(e){var t=this._getLevelFromZ(e),r=this.options.errorTileUrl||"";return t<0?r:(0,w.default)(this.imageryProvider,e.x,e.y,t)||r}},{key:"_getLevelFromZ",value:function(e){return e.z-this._zSubtract}},{key:"_update",value:function(){var e=this;this.imageryProvider.ready?(this.initialized||(this.initialized=!0,this._delayedUpdate&&(clearTimeout(this._delayedUpdate),this._delayedUpdate=void 0),this._delayedUpdate=setTimeout((function(){if(e._delayedUpdate=void 0,e._map){var t=e.imageryProvider.tilingScheme;if(t instanceof y.default){if(2===t.getNumberOfXTilesAtLevel(0)&&2===t.getNumberOfYTilesAtLevel(0))e._zSubtract=1;else if(1!==t.getNumberOfXTilesAtLevel(0)||1!==t.getNumberOfYTilesAtLevel(0))return void e.errorEvent.raiseEvent(e,a.default.t("map.cesium.unusalTilingScheme"));(0,m.default)(e.imageryProvider.maximumLevel)&&(e.options.maxNativeZoom=e.imageryProvider.maximumLevel),(0,d.default)(e.imageryProvider.minimumLevel)&&(e.options.minNativeZoom=e.imageryProvider.minimumLevel),(0,m.default)(e.imageryProvider.credit)&&e._map.attributionControl.addAttribution(X(e.imageryProvider.credit)),e._usable=!0,e._update()}else e.errorEvent.raiseEvent(e,a.default.t("map.cesium.notWebMercatorTilingScheme"))}}),this._leafletUpdateInterval)),this._usable&&(l.default.TileLayer.prototype._update.apply(this,arguments),this._updateAttribution())):this._delayedUpdate||(this._delayedUpdate=setTimeout((function(){e._delayedUpdate=void 0,e._update()}),this._leafletUpdateInterval))}},{key:"_updateAttribution",value:function(){if(this._usable&&(0,m.default)(this.imageryProvider.getTileCredits)){for(var e=0;e<this._previousCredits.length;++e)this._previousCredits[e]._shownInLeafletLastUpdate=this._previousCredits[e]._shownInLeaflet,this._previousCredits[e]._shownInLeaflet=!1;var t=this._map.getBounds(),r=this._map.getZoom()-this._zSubtract,i=this.imageryProvider.tilingScheme;W.longitude=Math.max(v.default.negativePiToPi(v.default.toRadians(t.getWest())),i.rectangle.west),W.latitude=Math.max(v.default.toRadians(t.getSouth()),i.rectangle.south);var n=i.positionToTileXY(W,r,q);(0,m.default)(n)||((n=q).x=0,n.y=i.getNumberOfYTilesAtLevel(r)-1),V.longitude=Math.min(v.default.negativePiToPi(v.default.toRadians(t.getEast())),i.rectangle.east),V.latitude=Math.min(v.default.toRadians(t.getNorth()),i.rectangle.north);var o=i.positionToTileXY(V,r,H);(0,m.default)(o)||((o=H).x=i.getNumberOfXTilesAtLevel(r)-1,o.y=0);for(var a=[],l=o.y;l<n.y;++l)for(var u=n.x;u<o.x;++u){var s=this.imageryProvider.getTileCredits(u,l,r);if((0,d.default)(s))for(var c=0;c<s.length;++c){var f=s[c];f._shownInLeaflet||(f._shownInLeaflet=!0,a.push(f),f._shownInLeafletLastUpdate||this._map.attributionControl.addAttribution(X(f)))}}for(var p=0;p<this._previousCredits.length;++p)this._previousCredits[p]._shownInLeaflet||(this._map.attributionControl.removeAttribution(X(this._previousCredits[p])),this._previousCredits[p]._shownInLeafletLastUpdate=!1);this._previousCredits=a}}},{key:"getFeaturePickingCoords",value:function(e,t,r){var i=this,n=new c.default(v.default.negativePiToPi(t),r,0),o=Math.round(e.getZoom());return(0,b.default)((function(){return i.imageryProvider.ready})).then((function(){var e=i.imageryProvider.tilingScheme.positionToTileXY(n,o);return{x:e.x,y:e.y,level:o}}))}},{key:"pickFeatures",value:(t=O().mark((function e(t,r,i,n,o){var a=this;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.default)((function(){return a.imageryProvider.ready}));case 2:return e.prev=2,e.next=5,this.imageryProvider.pickFeatures(t,r,i,n,o);case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e.catch(2),_.default.from(e.t0,"An error ocurred while calling `ImageryProvider#.pickFeatures`. `ImageryProvider.url = ".concat(this.imageryProvider.url,"`")).log();case 11:case"end":return e.stop()}}),e,this,[[2,8]])})),r=function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function a(e){P(o,i,n,a,l,"next",e)}function l(e){P(o,i,n,a,l,"throw",e)}a(void 0)}))},function(e,t,i,n,o){return r.apply(this,arguments)})},{key:"onRemove",value:function(e){this._delayedUpdate&&(clearTimeout(this._delayedUpdate),this._delayedUpdate=void 0);for(var t=0;t<this._previousCredits.length;++t)this._previousCredits[t]._shownInLeafletLastUpdate=!1,this._previousCredits[t]._shownInLeaflet=!1,e.attributionControl.removeAttribution(X(this._previousCredits[t]));return this._usable&&(0,d.default)(this.imageryProvider.credit)&&e.attributionControl.removeAttribution(X(this.imageryProvider.credit)),l.default.TileLayer.prototype.onRemove.apply(this,[e]),this._abortLoading(),this}}]),s}(l.default.TileLayer),n=x(i.prototype,"splitDirection",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.default.NONE}}),o=x(i.prototype,"splitPosition",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),x(i.prototype,"_clipsForSplitter",[u.computed],Object.getOwnPropertyDescriptor(i.prototype,"_clipsForSplitter"),i.prototype),i);function X(e){return e.element.outerHTML}t.default=Z},2759:function(e,t,r){"use strict";r(170),r(181),r(182),r(180),r(186),r(179),r(173),r(54),r(92),r(91),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(191),r(242),r(379),r(177),r(178),r(171),r(172),r(53),r(176);var i=d(r(235)),n=d(r(345)),o=d(r(414)),a=d(r(526)),l=d(r(187)),u=d(r(473)),s=d(r(207)),c=d(r(257)),f=d(r(480));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,O(i.key),i)}}function h(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=w(e);if(t){var n=w(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r){return(t=O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==p(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}var P=r(288).default,L=r(219).default,k=(a.default,function(){function e(t){y(this,e),S(this,"_displayID",void 0),S(this,"_scene",void 0),S(this,"_defaultDataSource",void 0),S(this,"_dataSourceCollection",void 0),S(this,"_visualizersCallback",void 0),S(this,"_eventHelper",void 0),S(this,"_ready",void 0),S(this,"_lastTime",void 0),this._displayID=P(),this._scene=t.scene,this._dataSourceCollection=t.dataSourceCollection,this._visualizersCallback=(0,l.default)(t.visualizersCallback,e.defaultVisualizersCallback),this._eventHelper=new u.default,this._eventHelper.add(this._dataSourceCollection.dataSourceAdded,this._onDataSourceAdded,this),this._eventHelper.add(this._dataSourceCollection.dataSourceRemoved,this._onDataSourceRemoved,this);for(var r=0,i=this._dataSourceCollection.length;r<i;r++)this._onDataSourceAdded(this._dataSourceCollection,this._dataSourceCollection.get(r));var n=new o.default;this._onDataSourceAdded(void 0,n),this._defaultDataSource=n,this._ready=!1,this._lastTime=c.default.now()}return h(e,[{key:"update",value:function(e){for(var t,r,i,n=!0,o=this._dataSourceCollection,a=o.length,l=0;l<a;l++){var u=o.get(l);if((0,s.default)(u.update)&&(n=u.update(e)&&n),r=this._getVisualizersForDataSource(u),(0,s.default)(r))for(i=r.length,t=0;t<i;t++)n=r[t].update(e)&&n}if(r=this._getVisualizersForDataSource(this._defaultDataSource),(0,s.default)(r))for(i=r.length,t=0;t<i;t++)n=r[t].update(e)&&n;return this._ready=n,this._lastTime=c.default.clone(e,this._lastTime),n}},{key:"destroy",value:function(){this._eventHelper.removeAll();for(var e=this._dataSourceCollection,t=0,r=e.length;t<r;++t)this._onDataSourceRemoved(this._dataSourceCollection,e.get(t));return this._onDataSourceRemoved(void 0,this._defaultDataSource),L(this)}},{key:"_onDataSourceAdded",value:function(e,t){var r=this._visualizersCallback(this._scene,void 0,t);t.visualizersByDisplayID=t.visualizersByDisplayID||{},t.visualizersByDisplayID[this._displayID]=r,t.visualizers=t.visualizers||[],t.visualizers=t.visualizers.concat(r)}},{key:"_onDataSourceRemoved",value:function(e,t){var r=this._getVisualizersForDataSource(t);if((0,s.default)(r)){for(var i=r.length,n=0;n<i;n++){var o=r[n];if(o.destroy(),(0,s.default)(t.visualizers)){var a=t.visualizers.indexOf(o);t.visualizers.splice(a,1)}}(0,s.default)(t.visualizersByDisplayID)&&delete t.visualizersByDisplayID[this._displayID]}}},{key:"_getVisualizersForDataSource",value:function(e){var t=e.visualizersByDisplayID;if((0,s.default)(t)&&(0,s.default)(t[this._displayID]))return t[this._displayID]}},{key:"getLatLngBounds",value:function(e){this.update(this._lastTime);var t=this._getVisualizersForDataSource(e);if((0,s.default)(t)){for(var r,i=0,n=t.length;i<n;i++){var o=t[i].getLatLngBounds();void 0!==o&&(r=void 0===r?f.default.latLngBounds(o.getSouthWest(),o.getNorthEast()):r.extend(o))}return r}}},{key:"getBoundingSphere",value:function(e,t,r){if(!this._ready)return n.default.PENDING;var o,a=this._defaultDataSource;if(!a.entities.contains(e)){a=void 0;var l=this._dataSourceCollection;o=l.length;for(var u=0;u<o;u++){var c=l.get(u);if(c.entities.contains(e)){a=c;break}}}if(!(0,s.default)(a)||!(0,s.default)(a.visualizers))return n.default.FAILED;for(var f=[],d=new i.default,p=0,v=n.default.DONE,h=a.visualizers,y=h.length,g=0;g<y;g++){var m=h[g];if((0,s.default)(m.getBoundingSphere)){if(v=m.getBoundingSphere(e,d),!t&&v===n.default.PENDING)return n.default.PENDING;v===n.default.DONE&&(f[p]=i.default.clone(d,f[p]),p++)}}return 0===p?n.default.FAILED:(f.length=p,i.default.fromBoundingSpheres(f,r),n.default.DONE)}}],[{key:"defaultVisualizersCallback",value:function(e,t,r){return[]}}]),e}());t.default=k},2760:function(e,t,r){"use strict";r(170),r(173),r(54),r(92),r(91),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(198),r(177),r(178),r(171),r(172),r(53),r(176);var i,n=(i=r(229))&&i.__esModule?i:{default:i};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,s(i.key),i)}}function l(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}var c=l((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"map",void 0),u(this,"featureClicked",new n.default),u(this,"featureMousedown",new n.default),this.map=t}));t.default=c},2761:function(e,t,r){"use strict";r(170),r(173),r(54),r(92),r(91),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(198),r(177),r(178),r(171),r(172),r(53),r(176);var i=c(r(232)),n=c(r(203)),o=c(r(544)),a=c(r(231)),l=c(r(480)),u=c(r(1009)),s=c(r(207));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,v(i.key),i)}}function p(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==f(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}var h=r(1011).default,y=r(1382),g=new i.default,m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"_leaflet",void 0),p(this,"_marker",void 0),p(this,"_tweens",new h),p(this,"_selectionIndicatorTween",void 0),p(this,"_selectionIndicatorIsAppearing",!1),p(this,"_selectionIndicatorDomElement",void 0),p(this,"_tweensAreRunning",!1),this._leaflet=t,this._marker=l.default.marker([0,0],{icon:l.default.divIcon({className:"",html:'<img src="'+y+'" width="50" height="50" alt="" />',iconSize:l.default.point(50,50)}),zIndexOffset:1,interactive:!1,keyboard:!1}),this._marker.addTo(this._leaflet.map),this._selectionIndicatorDomElement=this._marker._icon.children[0]}var t,r,i;return t=e,(r=[{key:"setLatLng",value:function(e){this._marker.setLatLng(e)}},{key:"animateSelectionIndicatorAppear",value:function(){if((0,s.default)(this._selectionIndicatorTween)){if(this._selectionIndicatorIsAppearing)return;this._selectionIndicatorTween.cancelTween(),this._selectionIndicatorTween=void 0}var e=this._selectionIndicatorDomElement.style;this._selectionIndicatorIsAppearing=!0;var t=this;this._selectionIndicatorTween=this._tweens.add({startObject:{scale:2,opacity:0,rotate:-180},stopObject:{scale:1,opacity:1,rotate:0},duration:.8,easingFunction:o.default.EXPONENTIAL_OUT,update:function(t){e.opacity=t.opacity,e.transform="scale("+t.scale+") rotate("+t.rotate+"deg)"},complete:function(){t._selectionIndicatorTween=void 0},cancel:function(){t._selectionIndicatorTween=void 0}}),this._startTweens()}},{key:"animateSelectionIndicatorDepart",value:function(){if((0,s.default)(this._selectionIndicatorTween)){if(!this._selectionIndicatorIsAppearing)return;this._selectionIndicatorTween.cancelTween(),this._selectionIndicatorTween=void 0}var e=this._selectionIndicatorDomElement.style;this._selectionIndicatorIsAppearing=!1;var t=this;this._selectionIndicatorTween=this._tweens.add({startObject:{scale:1,opacity:1},stopObject:{scale:1.5,opacity:0},duration:.8,easingFunction:o.default.EXPONENTIAL_OUT,update:function(t){e.opacity=t.opacity,e.transform="scale("+t.scale+") rotate(0deg)"},complete:function(){t._selectionIndicatorTween=void 0},cancel:function(){t._selectionIndicatorTween=void 0}}),this._startTweens()}},{key:"_startTweens",value:function(){var e=this;if(!this._tweensAreRunning){var t=this._leaflet.terria.selectedFeature;if((0,s.default)(t)&&(0,s.default)(t.position)){var r=a.default.WGS84.cartesianToCartographic(t.position.getValue(this._leaflet.terria.timelineClock.currentTime),g);this._marker.setLatLng([n.default.toDegrees(r.latitude),n.default.toDegrees(r.longitude)])}this._tweens.length>0&&this._tweens.update(),(0!==this._tweens.length||(0,s.default)(t)&&(0,s.default)(t.position))&&(0,u.default)((function(){e._startTweens()}))}}}])&&d(t.prototype,r),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=m},2762:function(e,t,r){"use strict";r(170),r(173),r(92),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(198),r(54),r(53),r(91),r(182),r(571),r(256),r(184),r(185),r(188),r(205),r(191),r(177),r(178),r(171),r(172),r(176);var i=v(r(333)),n=v(r(223)),o=v(r(197)),a=v(r(203)),l=v(r(218)),u=v(r(231)),s=v(r(207)),c=v(r(480)),f=v(r(739)),d=v(r(885)),p=r(2763);function v(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_(i.key),i)}}function m(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t,r){return(t=_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==h(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}var w=r(219).default,S=r(862).default,O=l.default.WHITE,P=l.default.BLACK,L="data:image/gif;base64,R0lGODlhAQABAPAAAAAAAP///yH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",k=0,C=function(){function e(t,r){y(this,e),this.leafletScene=t,this.entityCollection=r,b(this,"_featureGroup",void 0),b(this,"_entitiesToVisualize",void 0),b(this,"_entityHash",void 0),r.collectionChanged.addEventListener(this._onCollectionChanged,this),this._featureGroup=c.default.featureGroup().addTo(t.map),this._entitiesToVisualize=new i.default,this._entityHash={},this._onCollectionChanged(r,r.values,[],[])}return m(e,[{key:"_onCollectionChanged",value:function(e,t,r,i){for(var n,o=this._featureGroup,a=this._entitiesToVisualize,l=this._entityHash,u=t.length-1;u>-1;u--)n=t[u],(((0,s.default)(n.point)||(0,s.default)(n.billboard)||(0,s.default)(n.label))&&(0,s.default)(n.position)||(0,s.default)(n.polyline)||(0,s.default)(n.polygon)||(0,s.default)(n.rectangle))&&(a.set(n.id,n),l[n.id]={});for(var c=i.length-1;c>-1;c--)n=i[c],((0,s.default)(n.point)||(0,s.default)(n.billboard)||(0,s.default)(n.label))&&(0,s.default)(n.position)||(0,s.default)(n.polyline)||(0,s.default)(n.polygon)||(0,s.default)(n.rectangle)?(a.set(n.id,n),l[n.id]=l[n.id]||{}):(I(n,o,l),a.remove(n.id));for(var f=r.length-1;f>-1;f--)I(n=r[f],o,l),a.remove(n.id)}},{key:"update",value:function(e){var t=this._entitiesToVisualize.values,r=this._entityHash,i=this.leafletScene.map.getBounds(),n=!1,o=0;z(i)?(n=!0,o=1):F(i)&&(n=!0,o=2);for(var a=0,l=t.length;a<l;a++){var u=t[a],c=r[u.id];(0,s.default)(u._point)&&this._updatePoint(u,e,r,c,!0===n?i:void 0,k!==o),(0,s.default)(u.billboard)&&this._updateBillboard(u,e,r,c,!0===n?i:void 0),(0,s.default)(u.label)&&this._updateLabel(u,e,r,c),(0,s.default)(u.polyline)&&this._updatePolyline(u,e,r,c),(0,s.default)(u.polygon)&&this._updatePolygon(u,e,r,c),(0,s.default)(u.rectangle)&&this._updateRectangle(u,e,r,c)}return k=o,!0}},{key:"_updatePoint",value:function(e,t,r,i,n,a){var u=this._featureGroup,f=e.point;if(e.isAvailable(t)&&B(f.show,t,!0)){var d=i.point;(0,s.default)(d)||(d=i.point={layer:void 0,lastPosition:new o.default,lastPixelSize:1,lastColor:new l.default,lastOutlineColor:new l.default,lastOutlineWidth:1});var p=W(e.position,t);if((0,s.default)(p)){var v=B(f.pixelSize,t,5),h=B(f.color,t,O),y=B(f.outlineColor,t,P),g=B(f.outlineWidth,t,1),m=d.layer;if(!(0,s.default)(m)){var b={radius:v/2,fillColor:h.toCssColorString(),fillOpacity:h.alpha,color:y.toCssColorString(),weight:g,opacity:y.alpha};return(m=d.layer=c.default.circleMarker(R(p,n),b)).on("click",N.bind(void 0,this,e)),m.on("mousedown",G.bind(void 0,this,e)),u.addLayer(m),o.default.clone(p,d.lastPosition),d.lastPixelSize=v,l.default.clone(h,d.lastColor),l.default.clone(y,d.lastOutlineColor),d.lastOutlineWidth=g,m}o.default.equals(p,d.lastPosition)&&!a||(m.setLatLng(R(p,n)),o.default.clone(p,d.lastPosition)),v!==d.lastPixelSize&&(m.setRadius(v/2),d.lastPixelSize=v);var _=m.options,w=!1;l.default.equals(h,d.lastColor)||(_.fillColor=h.toCssColorString(),_.fillOpacity=h.alpha,l.default.clone(h,d.lastColor),w=!0),l.default.equals(y,d.lastOutlineColor)||(_.color=y.toCssColorString(),_.opacity=y.alpha,l.default.clone(y,d.lastOutlineColor),w=!0),g!==d.lastOutlineWidth&&(_.weight=g,d.lastOutlineWidth=g,w=!0),w&&m.setStyle(_)}else x(e,u,i)}else x(e,u,i)}},{key:"_updateBillboard",value:function(e,t,r,i,o){var a,l,u=e.billboard,f=this._featureGroup,d=i.billboard;(0,s.default)(d)||(d=i.billboard={layer:void 0});var p=d.layer,v=e.isAvailable(t)&&B(u.show,t,!0);if(v&&(a=W(e.position,t),v=(0,s.default)(a)),v){var h,y=R(a,o),g=U(u.image,t),m=U(u.height,t),b=U(u.width,t),_=B(u.color,t,O),w=B(u.scale,t,1),S=B(u.verticalOrigin,t,0),P=B(u.horizontalOrigin,t,0),k=B(u.pixelOffset,t,n.default.ZERO);(0,s.default)(g)&&(h="string"==typeof g?g:(0,s.default)(g.toDataURL)?g.toDataURL():(0,s.default)(g.url)?g.url:g.src);var C={color:_.toCssColorString(),origUrl:h,scale:w,horizontalOrigin:P,verticalOrigin:S};((0,s.default)(m)||(0,s.default)(b))&&(C.iconSize=[b,m]);var j=!1;if((0,s.default)(p)){for(var I in(l=p).getLatLng().equals(y)||l.setLatLng(y),C)if((0,s.default)(l.options.icon)&&C[I]!==l.options.icon.options[I]){j=!0;break}}else{var x={icon:c.default.icon({iconUrl:L})};(l=c.default.marker(y,x)).on("click",N.bind(void 0,this,e)),l.on("mousedown",G.bind(void 0,this,e)),f.addLayer(l),d.layer=l,j=!0}if(j){var E=!_.equals(O),D=function(e,t){C.iconUrl=t||e,(0,s.default)(C.iconSize)||(C.iconSize=[e.width*w,e.height*w]);var r=C.iconSize[0],i=C.iconSize[1],n=r/2*(1-P)-k.x,o=i/2*(1+S)-k.y;C.iconAnchor=[n,o],E&&(C.iconUrl=function(e,t){var r=document.createElement("canvas");r.width=e.width,r.height=e.height;var i=r.getContext("2d");if(null===i)return;i.drawImage(e,0,0);for(var n=i.getImageData(0,0,r.width,r.height),o=[t.red,t.green,t.blue,t.alpha],a=n.data.length,l=0;l<a;l+=4)for(var u=0;u<4;u++)n.data[u+l]*=o[u];return i.putImageData(n,0,0),r.toDataURL()}(e,_)),l.setIcon(c.default.icon(C))},A=new Image;A.onload=function(){D(A,h)},(0,s.default)(h)&&(A.src=h,E&&(A.crossOrigin="anonymous"))}}else T(e,f,i)}},{key:"_updateLabel",value:function(e,t,r,i){var o,l,f=e.label,d=this._featureGroup,p=i.label;(0,s.default)(p)||(p=i.label={layer:void 0});var v=p.layer,h=e.isAvailable(t)&&B(f.show,t,!0);if(h&&(o=W(e.position,t),h=(0,s.default)(o)),h){var y=u.default.WGS84.cartesianToCartographic(o),g=c.default.latLng(a.default.toDegrees(y.latitude),a.default.toDegrees(y.longitude)),m=U(f.text,t),b=U(f.font,t),_=B(f.scale,t,1),w=B(f.fillColor,t,O),P=B(f.verticalOrigin,t,0),k=B(f.horizontalOrigin,t,0),C=B(f.pixelOffset,t,n.default.ZERO),j={text:m,font:b,color:w.toCssColorString(),scale:_,horizontalOrigin:k,verticalOrigin:P},I=!1;if((0,s.default)(v)){for(var x in(l=v).getLatLng().equals(g)||l.setLatLng(g),j)if((0,s.default)(l.options.icon)&&j[x]!==l.options.icon.options[x]){I=!0;break}}else{var E={icon:c.default.icon({iconUrl:L})};(l=c.default.marker(g,E)).on("click",N.bind(void 0,this,e)),l.on("mousedown",G.bind(void 0,this,e)),d.addLayer(l),p.layer=l,I=!0}if(I){var T=S(m,{fillColor:w,font:b}).toDataURL(),A=new Image;A.onload=function(){!function(e,t){j.iconUrl=t||e,(0,s.default)(j.iconSize)||(j.iconSize=[e.width*_,e.height*_]);var r=j.iconSize[0],i=j.iconSize[1],n=r/2*(1-k)-C.x,o=i/2*(1+P)-C.y;j.iconAnchor=[n,o],l.setIcon(c.default.icon(j))}(A,T)},A.src=T}}else D(e,d,i)}},{key:"_updateRectangle",value:function(e,t,r,i){var n,o=this._featureGroup,u=e.rectangle;if((0,s.default)(u)){var f=e.isAvailable(t)&&B(u.show,t,!0),p=null===(n=u.coordinates)||void 0===n?void 0:n.getValue(t);if(f&&(0,s.default)(p)){var v=[[a.default.toDegrees(p.south),a.default.toDegrees(p.west)],[a.default.toDegrees(p.north),a.default.toDegrees(p.east)]],h=i.rectangle;(0,s.default)(h)||(h=i.rectangle={layer:void 0,lastFill:void 0,lastFillColor:new l.default,lastOutline:void 0,lastOutlineColor:new l.default});var y,g=B(u.fill,t,!0),m=B(u.outline,t,!0);u.outline instanceof d.default&&(y=j(u.outline,t));var b,_=B(u.outlineWidth,t,1),w=B(u.outlineColor,t,P),S=W(u.material,t);b=(0,s.default)(S)&&(0,s.default)(S.color)?S.color:O;var L=h.layer;if(!(0,s.default)(L)){var k={fill:g,fillColor:b.toCssColorString(),fillOpacity:b.alpha,weight:m?_:0,color:w.toCssColorString(),opacity:w.alpha};return m&&y&&(k.dashArray=y.map((function(e){return e*_})).join(",")),(L=h.layer=c.default.rectangle(v,k)).on("click",N.bind(void 0,this,e)),L.on("mousedown",G.bind(void 0,this,e)),o.addLayer(L),h.lastFill=g,h.lastOutline=m,l.default.clone(b,h.lastFillColor),void l.default.clone(w,h.lastOutlineColor)}var C=L.options,I=!1;g!==h.lastFill&&(C.fill=g,h.lastFill=g,I=!0),m!==h.lastOutline&&(C.weight=m?_:0,h.lastOutline=m,I=!0),l.default.equals(b,h.lastFillColor)||(C.fillColor=b.toCssColorString(),C.fillOpacity=b.alpha,l.default.clone(b,h.lastFillColor),I=!0),l.default.equals(w,h.lastOutlineColor)||(C.color=w.toCssColorString(),C.opacity=w.alpha,l.default.clone(w,h.lastOutlineColor),I=!0),L.getBounds().equals(v)||L.setBounds(v),I&&L.setStyle(C)}else!function(e,t,r){(0,s.default)(r.rectangle)&&(0,s.default)(r.rectangle.layer)&&(t.removeLayer(r.rectangle.layer),r.rectangle=void 0)}(0,o,i)}}},{key:"_updatePolygon",value:function(e,t,r,i){var n=this._featureGroup,o=e.polygon;if(e.isAvailable(t)&&B(o.show,t,!0)){var a=i.polygon;(0,s.default)(a)||(a=i.polygon={layer:void 0,lastHierarchy:void 0,lastFill:void 0,lastFillColor:new l.default,lastOutline:void 0,lastOutlineColor:new l.default});var u=W(o.hierarchy,t);if((0,s.default)(u)){var f,p=B(o.fill,t,!0),v=B(o.outline,t,!0);o.outline instanceof d.default&&(f=j(o.outline,t));var h,y=B(o.outlineWidth,t,1),g=B(o.outlineColor,t,P),m=W(o.material,t);h=(0,s.default)(m)&&(0,s.default)(m.color)?m.color:O;var b=a.layer;if(!(0,s.default)(b)){var _={fill:p,fillColor:h.toCssColorString(),fillOpacity:h.alpha,weight:v?y:0,color:g.toCssColorString(),opacity:g.alpha};return v&&f&&(_.dashArray=f.map((function(e){return e*y})).join(",")),(b=a.layer=c.default.polygon(M(u),_)).on("click",N.bind(void 0,this,e)),b.on("mousedown",G.bind(void 0,this,e)),n.addLayer(b),a.lastHierarchy=u,a.lastFill=p,a.lastOutline=v,l.default.clone(h,a.lastFillColor),void l.default.clone(g,a.lastOutlineColor)}u!==a.lastHierarchy&&(b.setLatLngs(M(u)),a.lastHierarchy=u);var w=b.options,S=!1;p!==a.lastFill&&(w.fill=p,a.lastFill=p,S=!0),v!==a.lastOutline&&(w.weight=v?y:0,a.lastOutline=v,S=!0),l.default.equals(h,a.lastFillColor)||(w.fillColor=h.toCssColorString(),w.fillOpacity=h.alpha,l.default.clone(h,a.lastFillColor),S=!0),l.default.equals(g,a.lastOutlineColor)||(w.color=g.toCssColorString(),w.opacity=g.alpha,l.default.clone(g,a.lastOutlineColor),S=!0),S&&b.setStyle(w)}else E(e,n,i)}else E(e,n,i)}},{key:"_updatePolyline",value:function(e,t,r,i){var n,o,l=e.polyline,p=this._featureGroup,v=i.polyline;(0,s.default)(v)||(v=i.polyline={layer:void 0});var h=v.layer,y=e.isAvailable(t)&&B(l.show,t,!0);if(y&&(n=W(l.positions,t),y=(0,s.default)(n)),y){for(var g,m,b,_=u.default.WGS84.cartesianArrayToCartographicArray(n),w=[],S=0;S<_.length;S++)w.push(c.default.latLng(a.default.toDegrees(_[S].latitude),a.default.toDegrees(_[S].longitude)));if(l.material instanceof f.default)g=O,b=5;else{var P=l.material.getValue(t);(0,s.default)(P)&&(g=P.color),g=g||O,b=B(l.width,t,5)}l.material instanceof d.default&&(m=j(l.material,t));var L={color:g.toCssColorString(),weight:b,opacity:g.alpha};if(m&&(L.dashArray=m.map((function(e){return e*b})).join(",")),(0,s.default)(h)){for(var k=(o=h).getLatLngs(),C=w.length!==k.length,I=0;I<k.length&&!C;I++){var x=k[I];x instanceof c.default.LatLng&&!x.equals(w[I])&&(C=!0)}for(var E in C&&o.setLatLngs(w),L)if(L[E]!==o.options[E]){o.setStyle(L);break}}else w.length>0&&((o=c.default.polyline(w,L)).on("click",N.bind(void 0,this,e)),o.on("mousedown",G.bind(void 0,this,e)),p.addLayer(o),v.layer=o)}else A(e,p,i)}},{key:"isDestroyed",value:function(){return!1}},{key:"destroy",value:function(){for(var e=this._entitiesToVisualize.values,t=this._entityHash,r=e.length-1;r>-1;r--)I(e[r],this._featureGroup,t);return this.entityCollection.collectionChanged.removeEventListener(this._onCollectionChanged,this),this.leafletScene.map.removeLayer(this._featureGroup),w(this)}},{key:"getLatLngBounds",value:function(){var e,t=this;return Object.keys(this._entityHash).forEach((function(r){var i=t._entityHash[r];Object.keys(i).forEach((function(t){var r=i[t];if((0,s.default)(r.layer)){if((0,s.default)(r.layer.getBounds)){var n=r.layer.getBounds();(0,s.default)(n)&&(e=void 0===e?c.default.latLngBounds(n.getSouthWest(),n.getNorthEast()):e.extend(n))}if((0,s.default)(r.layer.getLatLng)){var o=r.layer.getLatLng();(0,s.default)(o)&&(e=void 0===e?c.default.latLngBounds([o]):e.extend(o))}}}))})),e}}]),e}();function j(e,t){var r=e.dashPattern?e.dashPattern.getValue(t):void 0;return(0,p.getLineStyleLeaflet)(r)}function I(e,t,r){var i=r[e.id];x(e,t,i),E(e,t,i),T(e,t,i),D(e,t,i),A(e,t,i),delete r[e.id]}function x(e,t,r){(0,s.default)(r.point)&&(0,s.default)(r.point.layer)&&(t.removeLayer(r.point.layer),r.point=void 0)}function E(e,t,r){(0,s.default)(r.polygon)&&(0,s.default)(r.polygon.layer)&&(t.removeLayer(r.polygon.layer),r.polygon=void 0)}function T(e,t,r){(0,s.default)(r.billboard)&&(0,s.default)(r.billboard.layer)&&(t.removeLayer(r.billboard.layer),r.billboard=void 0)}function D(e,t,r){(0,s.default)(r.label)&&(0,s.default)(r.label.layer)&&(t.removeLayer(r.label.layer),r.label=void 0)}function A(e,t,r){(0,s.default)(r.polyline)&&(0,s.default)(r.polyline.layer)&&(t.removeLayer(r.polyline.layer),r.polyline=void 0)}function z(e){var t=e.getWest(),r=e.getEast();return t>140&&(r<-140||r>180)}function F(e){var t=e.getWest(),r=e.getEast();return(t>180||t<-140)&&r<-140}function R(e,t){var r=u.default.WGS84.cartesianToCartographic(e),i=a.default.toDegrees(r.longitude);return void 0!==t&&(z(t)?i<-140&&(i+=360):F(t)&&i>140&&(i-=360)),c.default.latLng(a.default.toDegrees(r.latitude),i)}function M(e){var t=[],r=Array.isArray(e)?e:e.positions;return e.holes.length>0?(e.holes.forEach((function(e){t.push(V(e.positions))})),[V(r)].concat(t)):V(r)}function N(e,t,r){e.leafletScene.featureClicked.raiseEvent(t,r)}function G(e,t,r){e.leafletScene.featureMousedown.raiseEvent(t,r)}function U(e,t){if((0,s.default)(e))return e.getValue(t)}function B(e,t,r){if((0,s.default)(e)){var i=e.getValue(t);if((0,s.default)(i))return i}return r}function W(e,t){if((0,s.default)(e))return e.getValue(t)}function V(e){for(var t,r=u.default.WGS84.cartesianArrayToCartographicArray(e),i=[],n=0;n<r.length;n++){var o=a.default.toDegrees(r[n].longitude);void 0!==t&&(t-o>180?o+=360:t-o<-180&&(o-=360)),i.push(c.default.latLng(a.default.toDegrees(r[n].latitude),o)),t=o}return i}var q=function(){function e(){y(this,e)}return m(e,[{key:"visualizersCallback",value:function(e,t,r){var i=r.entities;return[new C(e,i)]}}]),e}();t.default=q},2763:function(e,t,r){"use strict";r(170),Object.defineProperty(t,"__esModule",{value:!0}),t.getLineStyleCesium=function(e){if(n[e])return n[e];return},t.getLineStyleLeaflet=function(e){if(o[e])return o[e];return i};var i=[4,3],n={esriSLSDot:7,esriSLSDashDot:2017,esriSLSDashDotDot:16273,esriSLSLongDash:2047,esriSLSLongDashDot:4081,esriSLSShortDash:4095,esriSLSShortDot:13107,esriSLSShortDashDot:8179,esriSLSShortDashDotDot:16281},o={7:[1,3],2017:[4,3,1,3],16273:[8,3,1,3,1,3],2047:[8,3],4081:[8,3,1,3],4095:[4,1],13107:[1,1],8179:[4,1,1,1],16281:[4,1,1,1,1,1]}},2764:function(e,t,r){"use strict";r(170),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,n=(i=r(480))&&i.__esModule?i:{default:i};n.default.Canvas.prototype._onClick=function(e){for(var t=this._map.mouseEventToLayerPoint(e),r=[],i=this._drawFirst;i;i=i.next){var n=i.layer;n.options.interactive&&n._containsPoint(t)&&("click"!==e.type&&"preclick"===e.type||!this._map._draggableMoved(n))&&r.push(n)}this._fireEvent(!!r.length&&r,e)};var o=n.default;t.default=o},2765:function(e,t,r){"use strict";r(170),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=n.default.toDegrees(e.west),r=n.default.toDegrees(e.south),o=n.default.toDegrees(e.east),a=n.default.toDegrees(e.north);return i.default.latLngBounds([r,t],[a,o])};var i=o(r(480)),n=o(r(203));function o(e){return e&&e.__esModule?e:{default:e}}},2766:function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r(184),r(53),r(185),r(188),r(192),r(189),r(183),r(170),r(177),r(178),r(171),r(172),r(176),r(181),r(182),r(180),r(186),r(179),r(250),r(193),r(173),r(54),r(92),r(91),Object.defineProperty(t,"__esModule",{value:!0}),t.LeafletAttribution=void 0,r(198);var n,o,a,l=r(194),u=(n=r(480))&&n.__esModule?n:{default:n};function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,m(i.key),i)}}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=f(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=y(e);if(t){var n=y(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}var b,_,w,S,O,P,L=(o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(o,e);var t,r,i,n=p(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r,i,u,s,c={position:"bottomleft"};return e.configParameters.leafletAttributionPrefix&&(c.prefix=e.configParameters.leafletAttributionPrefix),g(h(t=n.call(this,c)),"_attributions",void 0),g(h(t),"map",void 0),g(h(t),"_container",void 0),r=h(t),i="dataAttributions",u=a,s=h(t),u&&Object.defineProperty(r,i,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(s):void 0}),(0,l.makeObservable)(h(t)),t._attributions={},t.dataAttributions=(0,l.observable)([]),t}return t=o,(r=[{key:"onAdd",value:function(e){var t=this;return e.attributionControl=this,this.map=e,this._container=u.default.DomUtil.create("div","leaflet-control-attribution"),u.default.DomEvent.disableClickPropagation(this._container),e.eachLayer((function(e){if(e.getAttribution){var r=e.getAttribution();r&&t.addAttribution(r)}})),this._container}},{key:"onRemove",value:function(){this.map=void 0}},{key:"_update",value:function(){if(this.map){var e=[],t=this._attributions;for(var r in t)t[r]&&e.push(r)}}},{key:"addAttribution",value:function(e){var t=this;return c(y(o.prototype),"addAttribution",this).call(this,e),this.map&&(0,l.runInAction)((function(){t.dataAttributions.push(e)})),this}},{key:"removeAttribution",value:function(e){var t=this;return c(y(o.prototype),"removeAttribution",this).call(this,e),this.map&&(0,l.runInAction)((function(){t.dataAttributions.remove(e)})),this}},{key:"attributions",get:function(){var e=[],t=this._attributions;for(var r in t)t[r]&&e.push(r);return e}},{key:"prefix",get:function(){if(this.options.prefix)return"".concat(this.options.prefix)}}])&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),o}(u.default.Control.Attribution),b=o.prototype,_="dataAttributions",w=[l.observable],S={configurable:!0,enumerable:!0,writable:!0,initializer:null},P={},Object.keys(S).forEach((function(e){P[e]=S[e]})),P.enumerable=!!P.enumerable,P.configurable=!!P.configurable,("value"in P||P.initializer)&&(P.writable=!0),P=w.slice().reverse().reduce((function(e,t){return t(b,_,e)||e}),P),O&&void 0!==P.initializer&&(P.value=P.initializer?P.initializer.call(O):void 0,P.initializer=void 0),void 0===P.initializer&&(Object.defineProperty(b,_,P),P=null),a=P,o);t.LeafletAttribution=L}}]);